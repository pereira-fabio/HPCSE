easyblock = 'ConfigureMake'

name = 'OSU-Micro-Benchmarks'
version = '7.5'
versionsuffix = '-gompi-2023b'

# Disable dependency building
builddependencies = False

toolchain = {'name': 'gompi', 'version': '2023b'}
source_urls = ['http://mvapich.cse.ohio-state.edu/download/mvapich/']
sources = ['osu-micro-benchmarks-%(version)s.tar.gz']

configopts = '--enable-mpi CC=mpicc CXX=mpicxx FC=mpif90'

sanity_check_paths = {
    'files': ['libexec/osu-micro-benchmarks/mpi/pt2pt/osu_bw',
              'libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency'],
    'dirs': []
}

moduleclass = 'perf'
